{
  "openapi": "3.1.0",
  "info": {
    "title": "Nextflow Pipeline Controller",
    "version": "1.4.10"
  },
  "paths": {
    "/api/v1/pipeline/run": {
      "post": {
        "tags": [
          "pipeline"
        ],
        "summary": "Start Run",
        "operationId": "start_run_api_v1_pipeline_run_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RunRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RunResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/pipeline/status": {
      "get": {
        "tags": [
          "pipeline"
        ],
        "summary": "Current Status",
        "operationId": "current_status_api_v1_pipeline_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ActiveRunStatus"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/pipeline/active": {
      "get": {
        "tags": [
          "pipeline"
        ],
        "summary": "Active Run",
        "operationId": "active_run_api_v1_pipeline_active_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ActiveRunStatus"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/pipeline/cancel": {
      "delete": {
        "tags": [
          "pipeline"
        ],
        "summary": "Cancel Run",
        "operationId": "cancel_run_api_v1_pipeline_cancel_delete",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CancelResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/pipeline/history": {
      "get": {
        "tags": [
          "pipeline"
        ],
        "summary": "Run History",
        "operationId": "run_history_api_v1_pipeline_history_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 10,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RunHistoryEntry"
                  },
                  "title": "Response Run History Api V1 Pipeline History Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/healthz": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": " Healthcheck",
        "operationId": "_healthcheck_healthz_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object",
                  "title": "Response  Healthcheck Healthz Get"
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": " Healthcheck",
        "operationId": "_healthcheck_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object",
                  "title": "Response  Healthcheck Health Get"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ActiveRunStatus": {
        "properties": {
          "active": {
            "type": "boolean",
            "title": "Active"
          },
          "run": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/RunInfo"
              },
              {
                "type": "null"
              }
            ]
          },
          "progress_percent": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress Percent"
          },
          "log_preview": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Log Preview"
          },
          "websocket_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Websocket Url"
          },
          "connected_clients": {
            "type": "integer",
            "title": "Connected Clients",
            "default": 0
          },
          "last_update": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Update"
          }
        },
        "type": "object",
        "required": [
          "active"
        ],
        "title": "ActiveRunStatus"
      },
      "CancelResponse": {
        "properties": {
          "run_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Run Id"
          },
          "status": {
            "$ref": "#/components/schemas/RunStatus"
          },
          "cancelled": {
            "type": "boolean",
            "title": "Cancelled"
          },
          "detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detail"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "status",
          "cancelled",
          "detail"
        ],
        "title": "CancelResponse"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "PipelineParameters": {
        "properties": {
          "pipeline": {
            "type": "string",
            "title": "Pipeline",
            "description": "Name of the Nextflow pipeline to run"
          },
          "workdir": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workdir",
            "description": "Working directory for pipeline execution"
          },
          "parameters": {
            "additionalProperties": true,
            "type": "object",
            "title": "Parameters",
            "description": "Arbitrary Nextflow parameters"
          }
        },
        "type": "object",
        "required": [
          "pipeline"
        ],
        "title": "PipelineParameters"
      },
      "RunHistoryEntry": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id"
          },
          "status": {
            "$ref": "#/components/schemas/RunStatus"
          },
          "started_at": {
            "type": "string",
            "format": "date-time",
            "title": "Started At"
          },
          "finished_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Finished At"
          },
          "duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Seconds"
          },
          "triggered_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Triggered By"
          },
          "job_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Name"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "status",
          "started_at",
          "finished_at",
          "duration_seconds",
          "triggered_by",
          "job_name"
        ],
        "title": "RunHistoryEntry"
      },
      "RunInfo": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id"
          },
          "status": {
            "$ref": "#/components/schemas/RunStatus"
          },
          "started_at": {
            "type": "string",
            "format": "date-time",
            "title": "Started At"
          },
          "finished_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Finished At"
          },
          "job_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Name"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "status",
          "started_at",
          "finished_at",
          "job_name",
          "message"
        ],
        "title": "RunInfo"
      },
      "RunRequest": {
        "properties": {
          "parameters": {
            "$ref": "#/components/schemas/PipelineParameters"
          },
          "triggered_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Triggered By",
            "description": "Identifier for the caller that triggered the run"
          }
        },
        "type": "object",
        "required": [
          "parameters"
        ],
        "title": "RunRequest"
      },
      "RunResponse": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id"
          },
          "status": {
            "$ref": "#/components/schemas/RunStatus"
          },
          "attached": {
            "type": "boolean",
            "title": "Attached"
          },
          "job_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Name"
          },
          "websocket_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Websocket Url"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "status",
          "attached"
        ],
        "title": "RunResponse"
      },
      "RunStatus": {
        "type": "string",
        "enum": [
          "queued",
          "starting",
          "running",
          "succeeded",
          "failed",
          "cancelled",
          "unknown"
        ],
        "title": "RunStatus"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}