{
  "openapi": "3.1.0",
  "info": {
    "title": "Data Pipeline Orchestrator - Portfolio Demo",
    "description": "Cloud-native parallel data processing showcase on Kubernetes",
    "version": "1.10.2"
  },
  "paths": {
    "/api/v1/demo/run": {
      "post": {
        "tags": [
          "demo"
        ],
        "summary": "Start Demo Run",
        "description": "Start a new demo pipeline run with specified batch count.",
        "operationId": "start_demo_run_api_v1_demo_run_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DemoRunRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RunResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/demo/preview": {
      "get": {
        "tags": [
          "demo"
        ],
        "summary": "Preview Demo Run",
        "description": "Preview what the demo run will execute without actually running it.",
        "operationId": "preview_demo_run_api_v1_demo_preview_get",
        "parameters": [
          {
            "name": "batch_count",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 12,
              "minimum": 1,
              "description": "Number of batches to process",
              "default": 5,
              "title": "Batch Count"
            },
            "description": "Number of batches to process"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Preview Demo Run Api V1 Demo Preview Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/demo/status": {
      "get": {
        "tags": [
          "demo"
        ],
        "summary": "Current Status",
        "description": "Get current status of the active demo run.",
        "operationId": "current_status_api_v1_demo_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ActiveRunStatus"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/demo/active": {
      "get": {
        "tags": [
          "demo"
        ],
        "summary": "Active Run",
        "description": "Check if there's an active demo run.",
        "operationId": "active_run_api_v1_demo_active_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ActiveRunStatus"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/demo/cancel": {
      "delete": {
        "tags": [
          "demo"
        ],
        "summary": "Cancel Run",
        "description": "Cancel the currently active demo run.",
        "operationId": "cancel_run_api_v1_demo_cancel_delete",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CancelResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/demo/history": {
      "get": {
        "tags": [
          "demo"
        ],
        "summary": "Run History",
        "description": "Get history of recent demo runs.",
        "operationId": "run_history_api_v1_demo_history_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 10,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RunHistoryEntry"
                  },
                  "title": "Response Run History Api V1 Demo History Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/demo/metrics": {
      "get": {
        "tags": [
          "demo-metrics"
        ],
        "summary": "Aggregate Metrics",
        "description": "Get aggregate statistics across all demo runs.\n\nReturns portfolio-ready metrics including:\n- Total runs executed\n- Success/failure rates\n- Average execution time\n- Total data processed",
        "operationId": "aggregate_metrics_api_v1_demo_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Aggregate Metrics Api V1 Demo Metrics Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/demo/results/{run_id}": {
      "get": {
        "tags": [
          "demo-metrics"
        ],
        "summary": "Get Demo Results",
        "description": "Get parsed results for a specific demo run.\n\nArgs:\n    run_id: The run ID to get results for\n\nReturns:\n    DemoResultMetrics if the run completed successfully and results are available\n\nRaises:\n    HTTPException: If run not found or results not available",
        "operationId": "get_demo_results_api_v1_demo_results__run_id__get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/DemoResultMetrics"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "title": "Response Get Demo Results Api V1 Demo Results  Run Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/demo/showcase": {
      "get": {
        "tags": [
          "demo-metrics"
        ],
        "summary": "Showcase Summary",
        "description": "Portfolio-ready summary with all-time statistics.\n\nThis endpoint provides a comprehensive showcase of the demo pipeline's\ncapabilities, optimized for display on a portfolio website.",
        "operationId": "showcase_summary_api_v1_demo_showcase_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Showcase Summary Api V1 Demo Showcase Get"
                }
              }
            }
          }
        }
      }
    },
    "/healthz": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": " Healthcheck",
        "operationId": "_healthcheck_healthz_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object",
                  "title": "Response  Healthcheck Healthz Get"
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": " Healthcheck",
        "operationId": "_healthcheck_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object",
                  "title": "Response  Healthcheck Health Get"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ActiveRunStatus": {
        "properties": {
          "active": {
            "type": "boolean",
            "title": "Active"
          },
          "run": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/RunInfo"
              },
              {
                "type": "null"
              }
            ]
          },
          "progress_percent": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress Percent"
          },
          "log_preview": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Log Preview"
          },
          "websocket_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Websocket Url"
          },
          "connected_clients": {
            "type": "integer",
            "title": "Connected Clients",
            "default": 0
          },
          "last_update": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Update"
          },
          "batches_generated": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Batches Generated",
            "description": "Number of GENERATE processes completed"
          },
          "batches_analyzed": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Batches Analyzed",
            "description": "Number of ANALYZE processes completed"
          },
          "estimated_completion": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Estimated Completion",
            "description": "Estimated completion time (based on 45-60s runtime)"
          },
          "parallel_workers_active": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parallel Workers Active",
            "description": "Current number of active worker pods"
          },
          "demo_metrics": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DemoResultMetrics"
              },
              {
                "type": "null"
              }
            ],
            "description": "Final metrics after completion"
          }
        },
        "type": "object",
        "required": [
          "active"
        ],
        "title": "ActiveRunStatus"
      },
      "CancelResponse": {
        "properties": {
          "run_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Run Id"
          },
          "status": {
            "$ref": "#/components/schemas/RunStatus"
          },
          "cancelled": {
            "type": "boolean",
            "title": "Cancelled"
          },
          "detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detail"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "status",
          "cancelled",
          "detail"
        ],
        "title": "CancelResponse"
      },
      "DemoResultMetrics": {
        "properties": {
          "total_batches": {
            "type": "integer",
            "title": "Total Batches",
            "description": "Number of batches processed"
          },
          "total_records": {
            "type": "integer",
            "title": "Total Records",
            "description": "Total records across all batches"
          },
          "total_sum": {
            "type": "integer",
            "title": "Total Sum",
            "description": "Sum of all values"
          },
          "average_value": {
            "type": "number",
            "title": "Average Value",
            "description": "Average value across all records"
          },
          "worker_pods_spawned": {
            "type": "integer",
            "title": "Worker Pods Spawned",
            "description": "Number of worker pods spawned during execution"
          },
          "execution_time_seconds": {
            "type": "number",
            "title": "Execution Time Seconds",
            "description": "Total execution time"
          },
          "report_path": {
            "type": "string",
            "title": "Report Path",
            "description": "Path to the generated report.json"
          }
        },
        "type": "object",
        "required": [
          "total_batches",
          "total_records",
          "total_sum",
          "average_value",
          "worker_pods_spawned",
          "execution_time_seconds",
          "report_path"
        ],
        "title": "DemoResultMetrics",
        "description": "Metrics extracted from demo pipeline results."
      },
      "DemoRunRequest": {
        "properties": {
          "batch_count": {
            "type": "integer",
            "maximum": 12.0,
            "minimum": 1.0,
            "title": "Batch Count",
            "description": "Number of data batches to process in parallel",
            "default": 5
          },
          "triggered_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Triggered By",
            "description": "Identifier for the caller that triggered the run (e.g., 'portfolio-visitor', 'admin')"
          }
        },
        "type": "object",
        "title": "DemoRunRequest",
        "description": "Request to start the demo pipeline."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "RunHistoryEntry": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id"
          },
          "status": {
            "$ref": "#/components/schemas/RunStatus"
          },
          "started_at": {
            "type": "string",
            "format": "date-time",
            "title": "Started At"
          },
          "finished_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Finished At"
          },
          "duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Seconds"
          },
          "triggered_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Triggered By"
          },
          "job_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Name"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "status",
          "started_at",
          "finished_at",
          "duration_seconds",
          "triggered_by",
          "job_name"
        ],
        "title": "RunHistoryEntry"
      },
      "RunInfo": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id"
          },
          "status": {
            "$ref": "#/components/schemas/RunStatus"
          },
          "started_at": {
            "type": "string",
            "format": "date-time",
            "title": "Started At"
          },
          "finished_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Finished At"
          },
          "job_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Name"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "status",
          "started_at",
          "finished_at",
          "job_name",
          "message"
        ],
        "title": "RunInfo"
      },
      "RunResponse": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id"
          },
          "status": {
            "$ref": "#/components/schemas/RunStatus"
          },
          "attached": {
            "type": "boolean",
            "title": "Attached"
          },
          "job_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Name"
          },
          "websocket_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Websocket Url"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "status",
          "attached"
        ],
        "title": "RunResponse"
      },
      "RunStatus": {
        "type": "string",
        "enum": [
          "queued",
          "starting",
          "running",
          "succeeded",
          "failed",
          "cancelled",
          "unknown"
        ],
        "title": "RunStatus"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}