apiVersion: v1
kind: ConfigMap
metadata:
  name: nextflow-k8s-service-config
  namespace: nextflow
  labels:
    app: nextflow-k8s-service
data:
  nextflow.config: |
    tower {
      enabled = false
    }
    process {
      executor = 'k8s'
      pod = [
        [ 'nodeSelector', [ 'kubernetes.io/os': 'linux' ] ],
        [ 'serviceAccountName', 'nextflow-runner' ],
      ]
      withName: '*' {
        resourceLimits = [ cpu: '1000m', memory: '1Gi' ]
      }
    }
    kubernetes {
      namespace = 'nextflow'
    }
